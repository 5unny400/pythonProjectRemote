# Java - 集合方法系列

### 字符串每隔10个字换行

```
String str="[标准][不要苦的][辣一点][微微甜][标准吧吧][不要苦的][辣一点][微微甜]";
log.info("{}",str.replaceAll("(.{10})","$1\n"));
```

### String.join 字符串拼接 数组array或集合list

```java
List names=new ArrayList<String>();
        names.add("1");
        names.add("2");
        names.add("3");
        System.out.println(String.join("-",names));

        String[]arrStr=new String[]{"a","b","c"};
        System.out.println(String.join("-",arrStr));

        输出：
        1-2-3
        a-b-c

        ex:String departmentIds=String.join(",",input.getDepartmentIds());
```

### 反转list数据

```java
Collections.reverse(list);
```

### Java中List循环遍历的时候删除当前遍历对象

```java
public class Test {

    public static void main(String args[]) {
        List<String> list = new ArrayList<String>();
        list.add("a");
        list.add("b");
        list.add("b");
        list.add("c");
        list.add("b");
        Iterator<String> iter = list.iterator();
        while (iter.hasNext()) {
            String s = iter.next();
            if (s.equals("b")) {
                iter.remove();
            }
        }
        System.out.println(list);
    }
}

// 如果在forEach里面 则 appContaminateOrFineDayList.removeIf(e -> e.getStationId() == 6);
```

### Java找出2个集合相同和不同的元素 ->  可参考：https://blog.csdn.net/qq_29347295/article/details/78630109

```
list2.removeAll(list1); // -> 求出的结果是 list2中有的但list1中没有
System.out.println("list2中不存在于list1中的："+list2);
list2X.removeAll(list2); // list2X值与排除前的list2值相等
System.out.println("list2中存在于list1中的："+list2);
```

### list分类统计数量

```
// 多字段统计
Map<String, Map<Integer, Long>> map = list.stream().collect(Collectors.groupingBy(User::getUserName,Collectors.groupingBy(User::getAge,Collectors.counting())));

// 单字段统计 【Collectors.summarizingLong方法中：包含总数，和，平均值等信息】
Map<String, LongSummaryStatistics> collect = list.stream().
                    collect(Collectors.groupingBy(MonitorTask::getType, Collectors.summarizingLong(MonitorTask::getMonitorTaskId)));
```

### Java判断List中是否有重复元素

```
// 1.将List转为Set，通过2个集合的size大小是否相等来判断有无重复元素
public static void main(String[] args) {
    List<String> stringList=new ArrayList<>(Arrays.asList("a","a","b","c"));
    Set<String> stringSet=new HashSet<>(stringList);
    if (stringList.size() == stringSet.size()) {
        System.out.println("没有重复元素");
    } else {
        System.out.println("有重复元素");
    }
}

// 2.使用jdk8的Stream来判断
public static void main(String[] args) {
    List<String> stringList=new ArrayList<>(Arrays.asList("a","a","b","c"));
    long count = stringList.stream().distinct().count();
    if (stringList.size() == count) {
    System.out.println("没有重复元素");
    } else {
    System.out.println("有重复元素");
    }
}

// 3.实际开发场景中,需要判断重复的元素可能在对象集合中每个对象的某个成员变量中，可以用jdk8的Stream很方便的获得想要的成员变量的集合，再判断是否有重复元素。
public static void main(String[] args) {
    List<Person> personList = new ArrayList<Person>(){{
        add(new Person("张三"));
        add(new Person("李四"));
        add(new Person("张三"));
    }};
    List<String> stringList = personList.stream().map(Person::getName)
        .collect(Collectors.toList());
    long count = stringList.stream().distinct().count();
    if (stringList.size() == count) {
        System.out.println("没有重复元素");
    } else {
        System.out.println("有重复元素");
    }
}

// 4.个人实战举例
if (this.calculateRuleDetailList.size() != this.calculateRuleDetailList.stream()
    .map(CalculateRuleDetailSaveRequestDTO::getItemName).collect(Collectors.toList()).stream().distinct()
    .count()) {
    throw new ParameterException("计算明细条目名称重复!");
}
```

### 分页处理

```
// 分页处理 [ skip：跳过n个元素，limit裁剪大小，pageNo 当前页，pageSize当前页大小。]
list = list.stream().skip((pageNo - 1) * pageSize).limit(pageSize).collect(Collectors.toList());
```
