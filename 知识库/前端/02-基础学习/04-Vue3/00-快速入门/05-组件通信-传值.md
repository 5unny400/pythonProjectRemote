# 组件通信

通信方式：

- props：父传子（子组件接收的数据只读）
- emit：子传父
- provide/inject：跨代传值
- vuex/pinia：跨组件传值
- 全局事件总线（mitt 或 tiny-emitter）：不推荐使用
- v-model
- refs

### 一、props & emit

#### 父组件

```
<template>
  <h3>{{ count }}</h3>
  <HelloWorld :list="[{ name: '小郑' }]" @add="handleAdd" />
</template>

<script setup>
import { ref } from "vue";
import HelloWorld from "./components/HelloWorld.vue";

const count = ref(0);

function handleAdd(data) {
  console.log(data);
  count.value++;
}
</script>

<style scoped></style>
```

#### 子组件

```
<template>
  <h3>{{ list }}</h3>
  <button @click="handleSubmit">提交数据</button>
</template>

<script setup>
// 父传子
const props = defineProps({
  list: {
    type: Array,
    required: false,
    default: () => [],
  },
});

// 子传父
const emits = defineEmits(["add"]);
function handleSubmit() {
  emits("add", "child");
}
</script>

<style scoped></style>
```